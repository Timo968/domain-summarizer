<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css">
  <title>Metadaten Extraktor</title>
</head>
<body>
  <div class="container">
    <h1>Metadaten Extraktor</h1>
    <input type="text" id="url" placeholder="URL eingeben" onkeydown="handleEnterKey(event)">
    <button onclick="fetchMetadata()">Metadaten abrufen</button>
    <div id="result"></div>
  </div>

  <script>
    function handleEnterKey(event) {
      if (event.key === 'Enter') {
        fetchMetadata();
      }
    }

    async function fetchMetadata() {
      let url = document.getElementById('url').value;
      const resultDiv = document.getElementById('result');
      resultDiv.innerHTML = '<div class="spinner"></div> Lade Metadaten...';

      if (!url.startsWith('http://') && !url.startsWith('https://')) {
        url = 'https://' + url;
      }

      const response = await fetch(`https://api.allorigins.win/get?url=${encodeURIComponent(url)}`);

      if (response.ok) {
        const data = await response.json();
        const parser = new DOMParser();
        const htmlDoc = parser.parseFromString(data.contents, 'text/html');
        
        const title = htmlDoc.querySelector('title').innerText;
        const descriptionMeta = htmlDoc.querySelector('meta[name="description"]');
        const description = descriptionMeta ? descriptionMeta.getAttribute('content') : 'Keine Beschreibung gefunden';

        resultDiv.innerHTML = `
          <h2>Titel:</h2>
          <p>${title}</p>
          <h2>Beschreibung:</h2>
          <p>${description}</p>
        `;
      } else {
        resultDiv.innerHTML = 'Fehler beim Abrufen der Metadaten';
      }
    }
  </script>
</body>
</html>
